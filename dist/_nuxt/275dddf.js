(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{647:function(e,t,n){"use strict";n.r(t);n(19),n(175);var o={props:{studentId:{type:Number,required:!0}},data:function(){return{editable:!1,responsibleName:"",responsiblePhone:"",nationalityCertificateNumber:"",nationalNumber:"",religion:"مسلم",motherName:"",phones:[],responsible:[]}},mounted:function(){this.fetchStudents()},methods:{fetchStudents:function(){var e=this;this.$axios.get("student/".concat(this.studentId)).then((function(t){console.log(t.data),e.nationalNumber=t.data.nationalInfo.nationalNumber,e.nationalityCertificateNumber=t.data.nationalityCertificate[0].nationalityNumber,e.motherName=t.data.nationalInfo.motherName,e.religion=t.data.nationalInfo.religion,e.responsible=t.data.studentResponsables,e.responsibleName=t.data.studentResponsables[0].responsibleName;for(var i=0;i<e.responsible.length;i++)e.phones.push({text:"رقم الهاتف",value:t.data.studentResponsables[i].responsiblePhone})}))},saveNumber:function(){var e={value:this.responsiblePhone,text:"رقم الهاتف"};if(this.phones.length>0){if(this.phones.some((function(t){return t.value===e.value})))return void this.$toast.error("رقم الهاتف موجود مسبقا",{duration:3e3,position:"top-center"});this.phones.push(e)}else this.phones.push(e);this.responsiblePhone=""},deleteNumber:function(i){this.phones.splice(i,1)},saveStudentResponsible:function(){if(this.responsible.length<1)try{this.$toast.show("جاري حفظ المعلومات...",{duration:3e3,position:"top-center"});for(var e=[],i=0;i<this.phones.length;i++){var t={responsibleName:this.responsibleName,responsiblePhone:this.phones[i].value,studentId:this.studentId};e.push(t)}this.$axios.post("addManyResponsible",e),this.$axios.post("addNationalityCertificate",{nationalityNumber:this.nationalityCertificateNumber,studentId:this.studentId}),this.$axios.post("addNationalityCertificate",{nationalNumber:this.nationalNumber,motherName:this.motherName,religion:this.religion,studentId:this.studentId}),this.$toast.success("تم حفظ المعلومات",{duration:3e3,position:"top-center"})}catch(e){console.log(e.response)}}}},l=n(52),r=n(56),d=n.n(r),c=n(128),v=n(435),m=n(705),h=n(425),f=n(706),N=n(203),x=n(204),_=n(127),y=n(707),C=n(584),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pa-10"},[n("v-form",{on:{submit:function(t){return t.preventDefault(),e.saveStudentResponsible.apply(null,arguments)}}},[n("v-row",[n("v-col",{attrs:{cols:"12",md:"6",lg:"6",xl:"6"}},[n("v-text-field",{attrs:{color:"accent",label:"اسم ولي الامر",outlined:"",disabled:!e.editable},model:{value:e.responsibleName,callback:function(t){e.responsibleName=t},expression:"responsibleName"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",xs:"12",sm:"12",md:"6",lg:"6",xl:"6"}},[n("v-row",[n("v-col",{attrs:{cols:"11"}},[n("v-text-field",{attrs:{color:"accent",label:"رقم ولي الامر",outlined:"",disabled:!e.editable},model:{value:e.responsiblePhone,callback:function(t){e.responsiblePhone=t},expression:"responsiblePhone"}})],1),e._v(" "),n("v-col",{attrs:{cols:"1"}},[n("v-btn",{attrs:{icon:"",color:"accent",depressed:"",disabled:!e.editable},on:{click:e.saveNumber}},[n("v-icon",[e._v("mdi-content-save")])],1)],1)],1)],1)],1),e._v(" "),n("v-divider"),e._v(" "),n("v-row",{staticClass:"mt-5"},[n("v-col",{attrs:{cols:"12",xs:"12",sm:"12",md:"4",lg:"4",xl:"4"}},[n("v-text-field",{attrs:{color:"accent",label:"رقم الجنسية",outlined:"",disabled:!e.editable},model:{value:e.nationalNumber,callback:function(t){e.nationalNumber=t},expression:"nationalNumber"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",xs:"12",sm:"12",md:"4",lg:"4",xl:"4"}},[n("v-text-field",{attrs:{color:"accent",label:"اسم الام",outlined:"",disabled:!e.editable},model:{value:e.motherName,callback:function(t){e.motherName=t},expression:"motherName"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",xs:"12",sm:"12",md:"4",lg:"4",xl:"4"}},[n("v-text-field",{attrs:{color:"accent",label:"الديانة",outlined:"",disabled:!e.editable},model:{value:e.religion,callback:function(t){e.religion=t},expression:"religion"}})],1)],1),e._v(" "),n("v-divider"),e._v(" "),n("v-row",{staticClass:"mt-5"},[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{color:"accent",label:"رقم شهادة الجنسية",outlined:"",disabled:!e.editable},model:{value:e.nationalityCertificateNumber,callback:function(t){e.nationalityCertificateNumber=t},expression:"nationalityCertificateNumber"}})],1)],1),e._v(" "),n("v-divider"),e._v(" "),n("v-card",{staticClass:"rounded-1 primary mt-10",attrs:{elevation:"0"}},e._l(e.phones,(function(t,o){return n("v-list",{key:o,attrs:{nav:"",dense:"",outlined:"",disabled:!e.editable}},[n("v-list-item",{on:{click:function(n){e.responsiblePhone=t.value}}},[n("div",{staticClass:"d-flex align-center justify-space-between",staticStyle:{width:"100%"}},[n("span",[e._v(e._s(t.text))]),e._v(" "),n("span",[e._v(e._s(t.value))])]),e._v(" "),n("v-btn",{staticClass:"mr-5",attrs:{icon:"",color:"accent",depressed:""},on:{click:function(t){return e.deleteNumber(o)}}},[n("v-icon",[e._v("mdi-delete")])],1)],1)],1)})),1),e._v(" "),n("v-divider",{staticClass:"mb-10 mt-10"}),e._v(" "),n("v-btn",{attrs:{depressed:"",color:"warning",large:""},on:{click:function(t){e.editable=!e.editable}}},[n("span",{staticClass:"secondary--text"},[e._v("\n        "+e._s(e.editable?"الغاء التحديث":"تحديث الطالب")+"\n      ")])]),e._v(" "),e.editable?n("v-btn",{staticClass:"mr-5",attrs:{depressed:"",color:"success",large:"",type:"submit"}},[n("span",{staticClass:"secondary--text"},[e._v("حفظ المعلومات")])]):e._e()],1)],1)}),[],!1,null,"ddf102d0",null);t.default=component.exports;d()(component,{VBtn:c.a,VCard:v.a,VCol:m.a,VDivider:h.a,VForm:f.a,VIcon:N.a,VList:x.a,VListItem:_.a,VRow:y.a,VTextField:C.a})}}]);